{
  "meta": {
    "schema_version": 1,
    "created": "2026-02-05",
    "last_modified": "2026-02-10T01:00:00Z",
    "archive_after_days": 14
  },
  "items": [
    {
      "id": "REFACTOR-04",
      "title": "Separate customer tests from core repo",
      "description": "Move 5 NSA-specific test files (~274 tests) from the core repo to context-builder-nsa. Defixture 12 gray-zone test files that use NSA YAML/data by replacing with synthetic fixtures. Set up test infrastructure in customer repo (pytest.ini, conftest.py, pip install from git tag). Add lint guard to prevent new tests from importing workspaces/. Document SOP for running tests on core PRs, customer PRs, and pre-deploy.",
      "status": "todo",
      "priority": "P3",
      "category": "refactoring",
      "effort": "medium",
      "plan_file": "plans/plan-customer-test-separation.md",
      "created": "2026-02-09T12:00:00Z",
      "started": null,
      "completed": null,
      "notes": "Files to move: test_nsa_cost_estimate_extractor, test_nsa_decision_engine, test_nsa_enricher, test_nsa_guarantee_extractor, test_nsa_screener. 12 additional files need defixturing.",
      "tags": ["testing", "customer-separation", "refactoring", "nsa"]
    },
    {
      "id": "FEAT-44",
      "title": "Confidence penalty based on cost estimate complexity and extraction confidence",
      "description": "Decrease the final decision/assessment confidence based on: (1) Number of line items in the cost estimate — more line items = more chances for extraction errors, so confidence should be penalized proportionally. (2) Extraction confidence scores — if the underlying data extraction has low confidence, the final assessment confidence should reflect that uncertainty. This creates a more honest confidence signal that accounts for the compounding risk of errors across many extracted values.",
      "status": "todo",
      "priority": "P3",
      "category": "feature",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-02-08T16:05:00Z",
      "started": null,
      "completed": null,
      "notes": "Touches: decision engine confidence calculation, extraction confidence propagation, possibly screener/analyzer summary",
      "tags": ["confidence", "extraction", "decision-engine", "cost-estimate"]
    },
    {
      "id": "REFACTOR-03",
      "title": "Review and redesign CLI for consistency and usability",
      "description": "Complete review of the CLI (context_builder.cli). Current experience feels inconsistent and amateurish — command structure, argument naming, help text, output formatting, and error messages need to be audited and redesigned for a natural, professional, and consistent user experience. Includes: (1) Audit all existing commands and subcommands for naming consistency, (2) Standardize help text and usage patterns, (3) Improve output formatting (progress indicators, colors, tables), (4) Consistent error handling and user-friendly error messages, (5) Review argument/flag naming conventions, (6) Ensure --help is comprehensive and well-structured at every level.",
      "status": "done",
      "priority": "P3",
      "category": "refactoring",
      "effort": "medium",
      "plan_file": "plans/agile-shimmying-quiche.md",
      "created": "2026-02-08T16:00:00Z",
      "started": "2026-02-09T12:10:00Z",
      "completed": "2026-02-09T18:00:00Z",
      "notes": "Replaced 2,844-line argparse monolith with Typer + Rich CLI package (9 command files). Commands flattened: index build->index, eval run->eval, coverage analyze->coverage, backfill-evidence->backfill, reconcile-eval->reconcile summary. Deprecated acquire removed. --json/--verbose/--quiet global flags. Rich progress bars replace tqdm. Commit 1fd9375.",
      "tags": ["cli", "ux", "developer-experience", "typer", "rich"]
    },
    {
      "id": "FEAT-43",
      "title": "Review customer feedback and fix coverage determination",
      "description": "Detailed review of February 2026 customer feedback (21 entries, 76% poor rating). Primary issues: (1) Coverage determination errors - system incorrectly identifies excluded components as covered (control arm, water pump, NOx sensors, AdBlue nozzle, high-pressure pump, cylinder head cover vs cylinder head, etc.). (2) Calculation display format needs redesign to show itemized parts/labor with subtotals, VAT, deductible, and total. (3) Data quality - missing odometer photos for km-limited policies. (4) Domain knowledge gaps - some exclusions require repairer confirmation. See docs/customer-feedback-2026-02.md for full analysis.",
      "status": "done",
      "priority": "P1",
      "category": "feature",
      "effort": "high",
      "plan_file": "docs/customer-feedback-2026-02.md",
      "created": "2026-02-08",
      "started": "2026-02-09T14:00:00Z",
      "completed": "2026-02-09T15:30:00Z",
      "notes": "Coverage determination fixed (commit fce4ceb). 13 claims reviewed: 10/13 already correct, 2 genuine bugs fixed (65060, 65268), 1 cosmetic issue (65208 — correct verdict but component misidentified as cylinder head instead of cylinder head cover, not fixed). Three fixes applied: (1) repair context extraction checks exclusion patterns, (2) labor demotion extended to all match methods, (3) safety net in tier 2 cross-checks line items. Remaining sub-tasks (calculation display redesign, odometer photo validation) are separate work items.",
      "tags": ["customer-feedback", "coverage", "ux"]
    },
    {
      "id": "FEAT-42",
      "title": "Package rename map ingestion",
      "description": "Implement package rename map ingestion functionality as documented in PACKAGE_RENAME_MAP_INGESTION.md",
      "status": "todo",
      "priority": "P5",
      "category": "feature",
      "effort": "medium",
      "plan_file": "docs/PACKAGE_RENAME_MAP_INGESTION.md",
      "created": "2026-02-06",
      "started": null,
      "completed": null,
      "notes": "",
      "tags": []
    },
    {
      "id": "FEAT-39",
      "title": "Cross-run reconciliation",
      "description": "Cross-run reconciliation (best-per-doc policy). Completed as part of the 2026-01-28 cross-run reconciliation work.",
      "status": "done",
      "priority": "P2",
      "category": "feature",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-28",
      "started": "2026-01-28",
      "completed": "2026-01-28",
      "notes": "",
      "tags": []
    },
    {
      "id": "FEAT-40",
      "title": "Claim-Level Runs Architecture",
      "description": "Claim-Level Runs Architecture (Pending Decision). Design and implement claim-level run tracking.",
      "status": "done",
      "priority": "P1",
      "category": "feature",
      "effort": "medium",
      "plan_file": "docs/CLAIM_LEVEL_RUNS_DESIGN.md",
      "created": "2026-01-26",
      "started": "2026-01-26",
      "completed": "2026-02-05T07:41:04Z",
      "notes": "Fully implemented: claim_runs/ active, ClaimRunManifest schema, FactProvenance.extraction_run_id",
      "tags": []
    },
    {
      "id": "FEAT-41",
      "title": "Reconciliation Implementation",
      "description": "Reconciliation Implementation. Completed as part of the 2026-01-26 reconciliation work.",
      "status": "done",
      "priority": "P1",
      "category": "feature",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-26",
      "started": "2026-01-26",
      "completed": "2026-01-26",
      "notes": "",
      "tags": []
    },
    {
      "id": "DISC-03",
      "title": "Define versioning strategy",
      "description": "Define versioning strategy (covers DISC-03, DISC-04, DISC-05).",
      "status": "done",
      "priority": "P3",
      "category": "discussion",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-18",
      "started": "2026-01-18",
      "completed": "2026-02-05T07:41:04Z",
      "notes": "Versioning policy in CLAUDE.md, version-bump.ps1 script, versions kept in sync",
      "tags": []
    },
    {
      "id": "DISC-06",
      "title": "Bump minor version more often",
      "description": "Bump minor version more often as part of versioning strategy.",
      "status": "done",
      "priority": "P3",
      "category": "discussion",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-18",
      "started": "2026-01-18",
      "completed": "2026-02-05T07:41:04Z",
      "notes": "Regular minor bumps happening per feature sets, policy documented",
      "tags": []
    },
    {
      "id": "DISC-01",
      "title": "Claims abstraction",
      "description": "Architectural discussion about claims abstraction.",
      "status": "todo",
      "priority": "P9",
      "category": "discussion",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "Doc classification is LOB-agnostic. System still claims-centric in terminology and storage.",
      "tags": []
    },
    {
      "id": "DISC-02",
      "title": "Line of Business (LOB)",
      "description": "Architectural discussion about Line of Business (LOB) support.",
      "status": "todo",
      "priority": "P9",
      "category": "discussion",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "No LOB tracking or detection implemented. System is intentionally LOB-agnostic.",
      "tags": []
    },
    {
      "id": "DISC-07",
      "title": "Missing vs wrong extraction",
      "description": "Architectural discussion about distinguishing missing vs wrong extraction.",
      "status": "done",
      "priority": "P9",
      "category": "discussion",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-18",
      "started": "2026-01-18",
      "completed": "2026-02-05T07:41:04Z",
      "notes": "Eval pipeline distinguishes missing extractions, BUG-07 fixed",
      "tags": []
    },
    {
      "id": "DISC-08",
      "title": "Hint language",
      "description": "Architectural discussion about hint language.",
      "status": "todo",
      "priority": "P9",
      "category": "discussion",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "Hints remain multilingual (Spanish/French/English). Decision pending on English-only policy.",
      "tags": []
    },
    {
      "id": "DISC-09",
      "title": "Consistent tree view",
      "description": "Architectural discussion about consistent tree view.",
      "status": "done",
      "priority": "P9",
      "category": "discussion",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-18",
      "started": "2026-01-18",
      "completed": "2026-02-05T07:41:04Z",
      "notes": "ClaimTree.tsx provides consistent hierarchical navigation",
      "tags": []
    },
    {
      "id": "DISC-10",
      "title": "Root documents view",
      "description": "Architectural discussion about root documents view.",
      "status": "done",
      "priority": "P9",
      "category": "discussion",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-18",
      "started": "2026-01-18",
      "completed": "2026-02-05T07:41:04Z",
      "notes": "Root shows claims with nested document counts",
      "tags": []
    },
    {
      "id": "INFRA-01",
      "title": "Fix hardcoded paths",
      "description": "Fix hardcoded paths (remaining instances throughout the codebase).",
      "status": "done",
      "priority": "P5",
      "category": "infrastructure",
      "effort": "medium",
      "plan_file": "plans/20260114-Fix-Hardcoded-Paths.md",
      "created": "2026-01-18",
      "started": "2026-01-18",
      "completed": "2026-02-05T07:41:04Z",
      "notes": "Only Tesseract system search paths remain (acceptable convention)",
      "tags": []
    },
    {
      "id": "SEC-01",
      "title": "Upgrade password hashing to bcrypt",
      "description": "CRITICAL: Current implementation uses SHA-256 with a hardcoded fixed salt ('contextbuilder_salt_') in api/services/users.py:66-70. SHA-256 is a fast hash not designed for password storage. Fixed salt means identical passwords produce identical hashes. Replace with bcrypt or argon2id with per-user random salts. Force password re-hashing on next login after migration.",
      "status": "todo",
      "priority": "P1",
      "category": "security",
      "effort": "low",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: CRITICAL severity. A single GPU can compute billions of SHA-256 hashes/second.",
      "tags": ["compliance-audit", "authentication", "cryptography"]
    },
    {
      "id": "SEC-02",
      "title": "Remove/randomize default credentials",
      "description": "CRITICAL: System auto-creates 4 default users all with password 'su' (admin:su, ted:su, seb:su, tod:su) in api/services/users.py:76-105. No forced password change on first login. Remove hardcoded defaults entirely. Require admin setup on first launch with strong password. Add password complexity requirements (minimum length, character classes).",
      "status": "todo",
      "priority": "P1",
      "category": "security",
      "effort": "low",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: CRITICAL severity. Admin account su:su is effectively a hardcoded backdoor.",
      "tags": ["compliance-audit", "authentication"]
    },
    {
      "id": "SEC-03",
      "title": "Encrypt or hash session tokens",
      "description": "Session tokens stored in plaintext JSON at .contextbuilder/sessions.json (api/services/auth.py:41,64-73). Tokens generated securely (secrets.token_urlsafe(32)) but storage has no encryption. For production: use Redis or database with access controls. At minimum, store hashes of session tokens rather than the tokens themselves.",
      "status": "todo",
      "priority": "P3",
      "category": "security",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: MEDIUM severity. Filesystem compromise exposes all active sessions.",
      "tags": ["compliance-audit", "session-management"]
    },
    {
      "id": "SEC-04",
      "title": "Add rate limiting (login + LLM endpoints)",
      "description": "HIGH: No rate limiting anywhere in the application. No slowapi, fastapi-limiter, or custom middleware. Login endpoint can be brute-forced at unlimited speed. LLM-calling endpoints (/api/claims/{id}/assessment/run, /api/pipeline/run) can exhaust API budgets. File upload has 100MB limit but no concurrency limit. Add slowapi or equivalent. Strict limits on login (5 attempts/min/IP). Rate limits on LLM-calling endpoints. Implement account lockout after repeated failed attempts.",
      "status": "todo",
      "priority": "P2",
      "category": "security",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: HIGH severity. Expanded scope from login-only to all endpoints, especially LLM-calling ones.",
      "tags": ["compliance-audit", "api-security", "rate-limiting"]
    },
    {
      "id": "SEC-05",
      "title": "Validate file magic bytes on upload",
      "description": "Upload validation only checks client-supplied content_type header (api/services/upload.py:157-170), which is trivially spoofable. Positive: claim_id is sanitized against path traversal, files stored with UUID names, 100MB size limit, MD5 hash computed. Add file magic byte validation using python-magic or filetype library for content-based type detection.",
      "status": "todo",
      "priority": "P4",
      "category": "security",
      "effort": "low",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: MEDIUM severity. Good mitigations exist (UUID naming, path sanitization) but content validation missing.",
      "tags": ["compliance-audit", "file-upload"]
    },
    {
      "id": "REFACTOR-02",
      "title": "Add stricter typing for DI",
      "description": "Add stricter typing for dependency injection in the backend.",
      "status": "todo",
      "priority": "P5",
      "category": "refactoring",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "Protocols defined (storage/protocol.py, compliance/interfaces.py); 7 Any types remain in pipeline/run.py, coverage_analysis.py, context.py",
      "tags": []
    },
    {
      "id": "PERF-01",
      "title": "Auto-rebuild stale indexes",
      "description": "Auto-rebuild stale indexes for backend performance improvement.",
      "status": "todo",
      "priority": "P5",
      "category": "performance",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "",
      "tags": []
    },
    {
      "id": "PERF-02",
      "title": "Async file I/O for hot paths",
      "description": "Async file I/O for hot paths for backend performance improvement.",
      "status": "todo",
      "priority": "P5",
      "category": "performance",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "Async endpoints exist but all file I/O (auth, users, storage) remains synchronous. Needs aiofiles or thread pool.",
      "tags": []
    },
    {
      "id": "FE-SEC-01",
      "title": "Add Error Boundaries",
      "description": "Add Error Boundaries to the frontend for critical error handling.",
      "status": "todo",
      "priority": "P5",
      "category": "fe-security",
      "effort": "low",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "",
      "tags": []
    },
    {
      "id": "FE-SEC-02",
      "title": "Migrate session tokens to HttpOnly cookies",
      "description": "HIGH: Auth tokens stored in localStorage (ui/src/context/AuthContext.tsx:89-90) are vulnerable to XSS exfiltration. Any injected JavaScript can read localStorage.getItem('auth_token'). Preferred fix: migrate to HttpOnly, Secure, SameSite=Strict cookies (cannot be accessed via JS). If cookies adopted, also add CSRF protection middleware. Original scope was sessionStorage but audit recommends HttpOnly cookies as the proper solution.",
      "status": "todo",
      "priority": "P3",
      "category": "fe-security",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: HIGH severity. Requires backend changes to set cookie on login response + frontend changes to remove localStorage token handling.",
      "tags": ["compliance-audit", "xss", "session-management"]
    },
    {
      "id": "FE-SEC-03",
      "title": "Remove or secure switchUser",
      "description": "Remove or secure the switchUser functionality in the frontend.",
      "status": "todo",
      "priority": "P5",
      "category": "fe-security",
      "effort": "low",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "switchUser exists in AuthContext.tsx, used from AdminPage. No re-auth required \u2014 security risk.",
      "tags": []
    },
    {
      "id": "FE-PERF-01",
      "title": "Add WebSocket reconnect backoff",
      "description": "Add WebSocket reconnect backoff for frontend performance.",
      "status": "todo",
      "priority": "P5",
      "category": "fe-performance",
      "effort": "low",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "Fixed 3s WS_RECONNECT_DELAY in usePipelineWebSocket.ts. reconnectAttempts tracked but unused for backoff.",
      "tags": []
    },
    {
      "id": "FE-PERF-02",
      "title": "Add request debouncing",
      "description": "Add request debouncing for frontend performance.",
      "status": "todo",
      "priority": "P5",
      "category": "fe-performance",
      "effort": "low",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "",
      "tags": []
    },
    {
      "id": "FE-PERF-03",
      "title": "Add route-level code splitting with React.lazy()",
      "description": "AppRoutes.tsx statically imports all 25+ page components into a single bundle. Zero React.lazy() usage anywhere. Users download Admin, Assessment, Compliance, Evaluation, Pipeline, etc. on initial load even if they only visit /batches. Wrap non-critical routes in React.lazy() + Suspense. Target: AdminPage (464 lines), AssessmentConsolePage (522 lines), TriageQueuePage, all CompliancePages, EvaluationPage, TokenCostsPage, TruthPage, PipelineControlCenter, ClaimIntakePage, CostEstimatesReviewPage. Expected savings: 100-200KB from initial bundle. Also configure Vite manualChunks (see FE-PERF-05).",
      "status": "todo",
      "priority": "P3",
      "category": "fe-performance",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-02-09T22:30:00Z",
      "started": null,
      "completed": null,
      "notes": "Identified in Vercel React Best Practices review. Violates: bundle-dynamic-imports, async-suspense-boundaries. Highest ROI frontend optimization.",
      "tags": ["bundle-size", "code-splitting", "react-lazy", "suspense", "vercel-best-practices"]
    },
    {
      "id": "FE-PERF-04",
      "title": "Adopt SWR or TanStack Query for data fetching",
      "description": "The entire app uses a hand-rolled fetchJson() wrapper (1,536-line client.ts) with 60+ manual useState(loading) + useEffect + fetch patterns. No request deduplication, no stale-while-revalidate, no cache between navigations, no background revalidation. Adopt SWR or TanStack Query to eliminate boilerplate and gain: automatic request dedup, in-memory caching with configurable TTL, stale-while-revalidate (instant navigation), revalidateOnFocus/reconnect, global retry/error config. Migration path: usePipelineData.ts hooks already return {data, isLoading, error, refetch} which matches the SWR API shape -- replace internals without changing call sites.",
      "status": "todo",
      "priority": "P3",
      "category": "fe-performance",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-02-09T22:30:00Z",
      "started": null,
      "completed": null,
      "notes": "Identified in Vercel React Best Practices review. Violates: client-swr-dedup. Biggest DX win -- eliminates ~80% of data fetching boilerplate. 60+ locations affected.",
      "tags": ["data-fetching", "swr", "tanstack-query", "caching", "vercel-best-practices"]
    },
    {
      "id": "FE-PERF-05",
      "title": "Add Vite manual chunks for large vendor libraries",
      "description": "vite.config.ts has no build.rollupOptions.output.manualChunks. Heavy vendor libs (recharts ~400KB, react-pdf ~200KB) end up in shared vendor chunks. Add explicit manual chunks to improve cache granularity (vendor libs change rarely vs app code), enable parallel downloads, and pair with lazy loading (FE-PERF-03). Config: manualChunks: { recharts: ['recharts'], 'react-pdf': ['react-pdf'] }. Trivial config change, 1 hour effort.",
      "status": "todo",
      "priority": "P4",
      "category": "fe-performance",
      "effort": "low",
      "plan_file": null,
      "created": "2026-02-09T22:30:00Z",
      "started": null,
      "completed": null,
      "notes": "Identified in Vercel React Best Practices review. Pairs with FE-PERF-03 (code splitting). Improves caching across deploys.",
      "tags": ["vite", "bundle-size", "chunking", "caching", "vercel-best-practices"]
    },
    {
      "id": "FE-PERF-06",
      "title": "Replace lucide-react with inline SVGs",
      "description": "lucide-react (~200KB) is in package.json but only 4 icons are used (X, Folder, FileText, RefreshCw in ClaimExplorer). The Sidebar already uses 14+ hand-coded inline SVG icons proving the team knows this pattern. Convert the 4 lucide icons to inline SVGs and remove the dependency. 30 minutes of effort.",
      "status": "todo",
      "priority": "P5",
      "category": "fe-performance",
      "effort": "low",
      "plan_file": null,
      "created": "2026-02-09T22:30:00Z",
      "started": null,
      "completed": null,
      "notes": "Identified in Vercel React Best Practices review. Violates: bundle-defer-third-party. Low effort, moderate bundle savings.",
      "tags": ["bundle-size", "icons", "dependencies", "vercel-best-practices"]
    },
    {
      "id": "FE-PERF-07",
      "title": "Add React.memo to frequently-rendered leaf components",
      "description": "Zero React.memo() usage in the codebase. Candidates: FactRow (ClaimFactsTab -- rendered 50+ times in lists), SummaryCell (FinancialSummaryCard -- receives only props), FactItem (ClaimFactsTab -- simple presentational), SortIndicator (LineItemDecisionsTable -- pure function of column+direction). These leaf components re-render when parents update even if their own props haven't changed. Also hoist the inline tabs array at ClaimsWorkbenchPage.tsx:1192 into useMemo. Low effort, marginal but measurable gains on large lists.",
      "status": "todo",
      "priority": "P5",
      "category": "fe-performance",
      "effort": "low",
      "plan_file": null,
      "created": "2026-02-09T22:30:00Z",
      "started": null,
      "completed": null,
      "notes": "Identified in Vercel React Best Practices review. Violates: rerender-memo. Only meaningful for pages with 100+ list items and frequent parent re-renders.",
      "tags": ["react-memo", "re-renders", "optimization", "vercel-best-practices"]
    },
    {
      "id": "FE-REFACTOR-01",
      "title": "Split large components",
      "description": "Split large frontend components for better code organization.",
      "status": "todo",
      "priority": "P5",
      "category": "fe-refactoring",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "PipelineControlCenter.tsx: 1221 lines (46KB). DocumentReview.tsx: 866 lines (34KB). Still oversized.",
      "tags": []
    },
    {
      "id": "FE-REFACTOR-02",
      "title": "Centralize API types",
      "description": "Centralize API types in the frontend for better code organization.",
      "status": "todo",
      "priority": "P5",
      "category": "fe-refactoring",
      "effort": "low",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "~27 API-specific types remain in client.ts. Core types centralized in types/index.ts.",
      "tags": []
    },
    {
      "id": "FE-A11Y-01",
      "title": "Add ARIA labels to icon buttons",
      "description": "Add ARIA labels to icon buttons for frontend accessibility.",
      "status": "todo",
      "priority": "P5",
      "category": "fe-accessibility",
      "effort": "low",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "",
      "tags": []
    },
    {
      "id": "FE-A11Y-02",
      "title": "Add skip links",
      "description": "Add skip links for frontend accessibility.",
      "status": "todo",
      "priority": "P5",
      "category": "fe-accessibility",
      "effort": "low",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "",
      "tags": []
    },
    {
      "id": "FE-A11Y-03",
      "title": "Audit color contrast",
      "description": "Audit color contrast for frontend accessibility.",
      "status": "todo",
      "priority": "P5",
      "category": "fe-accessibility",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-01-18",
      "started": null,
      "completed": null,
      "notes": "",
      "tags": []
    },
    {
      "id": "SEC-06",
      "title": "Add authentication to all API endpoints",
      "description": "CRITICAL: 82 of 103 API endpoints (80%) have no authentication. Unauthenticated users can: read all claims data (PII), upload documents, modify labels/ground truth (data poisoning), delete pending claims, view assessments/coverage, access cost/token data, modify prompt configs (affecting LLM behavior), trigger LLM calls (budget exhaustion). Unprotected routers: claims (18), documents (10), classification (5), dashboard (3), insights (15), evolution (2), decision (7), upload (7), pipeline (11 of 14), system (2). Add Depends(get_current_user) to ALL endpoints as baseline. Apply role-specific checks per endpoint. Consider global auth middleware.",
      "status": "todo",
      "priority": "P1",
      "category": "security",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-02-10T01:00:00Z",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: HIGH severity (effectively CRITICAL given PII exposure). Only admin_users, admin_workspaces, compliance, pipeline (start/cancel/delete), auth(/me) are protected.",
      "tags": ["compliance-audit", "authentication", "authorization", "api-security"]
    },
    {
      "id": "SEC-07",
      "title": "Add security headers middleware",
      "description": "HIGH: No security headers on any API response. Missing: Strict-Transport-Security (HSTS), Content-Security-Policy (CSP), X-Content-Type-Options, X-Frame-Options, X-XSS-Protection, Referrer-Policy, Permissions-Policy, COOP/CORP. Application serves React SPA in production (api/main.py:149-176) without any headers. Add a FastAPI middleware that sets at minimum: X-Content-Type-Options: nosniff, X-Frame-Options: DENY, Strict-Transport-Security: max-age=31536000, Content-Security-Policy, Referrer-Policy: strict-origin-when-cross-origin.",
      "status": "todo",
      "priority": "P2",
      "category": "security",
      "effort": "low",
      "plan_file": null,
      "created": "2026-02-10T01:00:00Z",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: HIGH severity. Vulnerable to clickjacking, MIME sniffing, no HTTPS enforcement via HSTS.",
      "tags": ["compliance-audit", "http-security", "owasp"]
    },
    {
      "id": "SEC-08",
      "title": "Tighten CORS to specific deployment origins",
      "description": "HIGH: CORS allows any subdomain on onrender.com and azurewebsites.net via allow_origin_regex (api/main.py:84-91). Combined with allow_credentials=True and allow_methods/headers=['*']. A malicious app on evil.onrender.com could make authenticated cross-origin requests. Replace wildcard regex with specific whitelisted deployment URLs. Restrict allow_methods to GET/POST/PUT/DELETE. Restrict allow_headers to Authorization/Content-Type. Remove allow_credentials=True with wildcard-like patterns.",
      "status": "todo",
      "priority": "P3",
      "category": "security",
      "effort": "low",
      "plan_file": null,
      "created": "2026-02-10T01:00:00Z",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: HIGH severity. CORS_EXTRA_ORIGINS env var also allows arbitrary origins without validation.",
      "tags": ["compliance-audit", "cors", "api-security"]
    },
    {
      "id": "SEC-09",
      "title": "Enable PII vault and encrypted storage backend",
      "description": "CRITICAL: PII vault is disabled by default (services/compliance/config.py:64, pii_vault_enabled=False). The stub in storage/pii_vault.py returns text unchanged. Full implementation EXISTS (services/compliance/pii/vault_storage.py with AES-256-GCM, per-claim KEK, crypto-shredding) but is gated behind the flag. All extracted PII (names, addresses, gov IDs, medical info, financial data) stored as plaintext JSON. Also: LLM audit logs store complete prompts/responses with PII in plaintext JSONL. Enable pii_vault, switch to encrypted storage backend, ensure PII redaction before LLM calls.",
      "status": "todo",
      "priority": "P1",
      "category": "security",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-02-10T01:00:00Z",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: CRITICAL severity. Non-compliant with GDPR Art. 32, HIPAA Security Rule, Swiss nDSG. Architecture is ready -- just needs activation and testing.",
      "tags": ["compliance-audit", "pii", "encryption", "gdpr", "data-privacy"]
    },
    {
      "id": "SEC-10",
      "title": "Add pre-commit secret detection hook",
      "description": "Live API keys exist in .env file (gitignored, not committed). Keys include: SUPABASE_KEY, SUPABASE_SERVICE_KEY (admin JWT), PINECONE_API_KEY, AZURE_OPENAI_API_KEY, AZURE_DI_API_KEY, APIFY_API_KEY, plus commented-out OPENAI_API_KEY and ANTHROPIC_API_KEY. Add gitleaks or detect-secrets as pre-commit hook to prevent accidental commits. Remove commented-out keys (still provide attackable information). Consider migrating to a secrets manager (Azure Key Vault) for production.",
      "status": "todo",
      "priority": "P2",
      "category": "security",
      "effort": "low",
      "plan_file": null,
      "created": "2026-02-10T01:00:00Z",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: CRITICAL finding for live keys on disk, but mitigated by .gitignore. Pre-commit hook is the preventive control.",
      "tags": ["compliance-audit", "secrets-management", "pre-commit"]
    },
    {
      "id": "SEC-11",
      "title": "Sanitize error responses to prevent info leakage",
      "description": "MEDIUM: Multiple endpoints return raw exception messages and internal paths. Examples: claims.py:789 leaks file paths from IOError, claims.py:882 leaks internal error details, documents.py:76 leaks filesystem errors, compliance.py:159-160 prints full traceback, system.py:78 health check returns data_dir filesystem path. Return generic error messages to clients. Log detailed errors server-side only. Remove filesystem path from health check. Add global exception handler that sanitizes responses.",
      "status": "todo",
      "priority": "P4",
      "category": "security",
      "effort": "low",
      "plan_file": null,
      "created": "2026-02-10T01:00:00Z",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: MEDIUM severity. Helps attackers understand internal structure.",
      "tags": ["compliance-audit", "error-handling", "information-disclosure"]
    },
    {
      "id": "SEC-12",
      "title": "Authenticate WebSocket connections",
      "description": "MEDIUM: Both WebSocket endpoints accept connections without authentication. pipeline.py:579 (/api/pipeline/ws/{run_id}) and claims.py:465 (/api/claims/{claim_id}/assessment/ws/{run_id}) accept any connection. Run IDs follow predictable format (BATCH-YYYYMMDD-NNN, ASM-YYYYMMDD-HHMMSS-hex) making enumeration feasible. Require valid session token as query parameter or in initial WebSocket handshake. Validate authorization before accepting connection. Also add Origin header validation.",
      "status": "todo",
      "priority": "P4",
      "category": "security",
      "effort": "low",
      "plan_file": null,
      "created": "2026-02-10T01:00:00Z",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: MEDIUM severity. Anyone with run_id can receive real-time pipeline progress and assessment results.",
      "tags": ["compliance-audit", "websocket", "authentication"]
    },
    {
      "id": "SEC-13",
      "title": "Remove or gate ledger reset endpoint",
      "description": "CRITICAL: DELETE /api/compliance/ledger/reset (api/routers/compliance.py:55-88) permanently deletes ALL compliance decision records. Single admin API call destroys entire audit trail. No confirmation step, no backup, no logging of deletion itself to immutable store. In regulated insurance environment, this could constitute evidence destruction. Remove endpoint from production entirely. If needed for dev, gate behind ALLOW_LEDGER_RESET env variable. If reset is ever needed, implement soft-delete (archive + seal with new hash chain). Log reset action to separate non-resettable audit log.",
      "status": "todo",
      "priority": "P1",
      "category": "security",
      "effort": "low",
      "plan_file": null,
      "created": "2026-02-10T01:00:00Z",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: CRITICAL severity. Undermines all tamper-evidence guarantees of hash-chained decision ledger.",
      "tags": ["compliance-audit", "audit-trail", "immutability", "compliance"]
    },
    {
      "id": "SEC-14",
      "title": "Prevent silent LLM logging disable in production",
      "description": "HIGH: LLM call logging can be silently disabled via COMPLIANCE_LLM_LOGGING_ENABLED=false (services/llm_audit.py:102-109). Uses NullLLMCallStorage that discards all records. CLI commands explicitly disable it (cmd_assess.py:64, cmd_pipeline.py:88). No indication in decision records that logging was suppressed. Remove ability to disable in production deployments. If quiet mode needed for dev, record stub record indicating logging was disabled. Add marker to decision records when associated LLM calls were not logged.",
      "status": "todo",
      "priority": "P2",
      "category": "security",
      "effort": "low",
      "plan_file": null,
      "created": "2026-02-10T01:00:00Z",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: HIGH severity. Assessments can be made on claims with no record of what the LLM said or was asked.",
      "tags": ["compliance-audit", "llm-audit", "compliance"]
    },
    {
      "id": "SEC-15",
      "title": "Add consent management and data processing records",
      "description": "MEDIUM: No consent tracking mechanism. Documents can be uploaded and processed without recording whether consent was obtained. No data processing activity log as required by GDPR Article 30. Insurance claims processing may rely on legitimate interests or contractual necessity, but this should be documented and tracked in the system. Add GDPR Art. 30 processing activity records. Document legal basis for processing per document type.",
      "status": "todo",
      "priority": "P4",
      "category": "security",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-02-10T01:00:00Z",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: MEDIUM severity. Required if processing EU data subjects. May be deferred if operating under contractual necessity basis.",
      "tags": ["compliance-audit", "gdpr", "consent", "data-privacy"]
    },
    {
      "id": "SEC-16",
      "title": "Protect exported Excel files containing PII",
      "description": "MEDIUM: ExportService.export_to_excel() (api/services/export.py) exports all workspace data to unencrypted Excel files including extraction results with PII (when vault disabled). Sheets include claims, documents, extractions, claim_facts, labels, reconciliation. Exported files can be shared/emailed without encryption. Add password protection to exported files. Add watermark/tracking. Consider requiring PII vault to be enabled before allowing export.",
      "status": "todo",
      "priority": "P4",
      "category": "security",
      "effort": "low",
      "plan_file": null,
      "created": "2026-02-10T01:00:00Z",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: MEDIUM severity. Data leakage vector outside controlled workspace environment.",
      "tags": ["compliance-audit", "data-privacy", "export"]
    },
    {
      "id": "INFRA-02",
      "title": "Implement log retention policy and archival",
      "description": "HIGH: No log retention policy exists. No automated retention, TTL-based cleanup, rotation, archival, or purge. Compliance logs (decisions.jsonl, llm_calls.jsonl) grow unbounded. Insurance regulations typically require 5-10 year minimum retention. Define and document retention policies per applicable jurisdiction. Implement automated log archival to durable/immutable storage. Add log rotation with integrity-preserving archive sealing (hash final state before archival). Add max file size warnings. FileStorage.delete_claim() preserves labels but does not address PII in extraction results or LLM audit logs.",
      "status": "todo",
      "priority": "P3",
      "category": "infrastructure",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-02-10T01:00:00Z",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: HIGH severity. GDPR Art. 5(1)(e) storage limitation principle. No documented minimum retention period.",
      "tags": ["compliance-audit", "log-retention", "gdpr", "compliance"]
    },
    {
      "id": "INFRA-03",
      "title": "Add OS-level file protection for compliance logs",
      "description": "HIGH: Compliance log files (decisions.jsonl, llm_calls.jsonl) are regular files with standard filesystem permissions. No os.chmod() for read-only after writing, no append-only attributes, no WORM storage. The decision storage uses temp-file-rename pattern (good for integrity) but reads entire file, appends, and replaces -- app has full read-write access at all times. Set file permissions to append-only where OS supports it. Consider WORM storage for production. Implement log forwarding to remote immutable store (S3 Object Lock, Azure Immutable Blob Storage). At minimum, store rolling digest in separate location.",
      "status": "todo",
      "priority": "P3",
      "category": "infrastructure",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-02-10T01:00:00Z",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: HIGH severity. No defense-in-depth against insider threats or compromised processes.",
      "tags": ["compliance-audit", "immutability", "audit-trail", "compliance"]
    },
    {
      "id": "INFRA-04",
      "title": "Add compliance health monitoring",
      "description": "MEDIUM: No centralized mechanism to monitor compliance logging infrastructure health. If decision ledger corrupts, LLM log becomes inaccessible, or PII vault KEK is deleted, no automated alerting exists. Only manual GET /api/compliance/ledger/verify endpoint. Also: decision logging failures are silently swallowed (try/except -> warning) in classifier, extractor, and labels service. Implement periodic automated compliance health check: verify hash chain integrity, check log files are writable/growing, validate PII vault KEK accessibility. Consider circuit breaker that alerts when compliance logging fails repeatedly. Optionally add fail-closed mode where pipeline halts if compliance logging cannot be guaranteed.",
      "status": "todo",
      "priority": "P4",
      "category": "infrastructure",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-02-10T01:00:00Z",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: MEDIUM severity. Silent failures mean claims could be processed without audit trail and nobody would know.",
      "tags": ["compliance-audit", "monitoring", "compliance"]
    },
    {
      "id": "FEAT-45",
      "title": "Log screening and coverage decisions to compliance ledger",
      "description": "MEDIUM: Screening stage runs deterministic checks (policy validity, mileage, coverage validation) and writes results to screening.json and coverage_analysis.json, but these decisions are NOT appended to the hash-chained compliance decision ledger. Similarly, the decision stage writes decision_dossier but does not create a DecisionRecord. These are significant automated decisions (e.g., 'coverage denied because component not in policy') that should have the same compliance treatment. Add DecisionType.SCREENING and DecisionType.COVERAGE to enum. Append records for screening checks and coverage determinations.",
      "status": "todo",
      "priority": "P3",
      "category": "feature",
      "effort": "medium",
      "plan_file": null,
      "created": "2026-02-10T01:00:00Z",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: MEDIUM severity. Auditor querying ledger would miss these decisions -- only findable by inspecting run directory files.",
      "tags": ["compliance-audit", "audit-trail", "compliance", "screening", "coverage"]
    },
    {
      "id": "FEAT-46",
      "title": "Propagate actor identity to all decision logging",
      "description": "MEDIUM: Several decision logging calls use hardcoded 'reviewer' for actor_id instead of actual username. Classification override (api/services/labels.py:280) and classification approval (labels.py:326) both hardcode actor_id='reviewer'. Human review logging correctly passes reviewer parameter. In multi-user environments, impossible to determine which user approved/overrode a classification. Propagate authenticated user identity (from CurrentUser dependency) to all decision logging methods.",
      "status": "todo",
      "priority": "P3",
      "category": "feature",
      "effort": "low",
      "plan_file": null,
      "created": "2026-02-10T01:00:00Z",
      "started": null,
      "completed": null,
      "notes": "Compliance audit 2026-02-09: MEDIUM severity. Weakens individual accountability in audit trail.",
      "tags": ["compliance-audit", "audit-trail", "compliance", "rbac"]
    }
  ]
}
