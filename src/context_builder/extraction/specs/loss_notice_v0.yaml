doc_type: loss_notice
version: v0

required_fields:
  - claim_number
  - incident_date

optional_fields:
  - incident_location
  - vehicle_plate

field_rules:
  claim_number:
    normalize: uppercase_trim
    validate: non_empty
    hints:
      - "siniestro"
      - "claim"
      - "n°"
      - "reclamo"
      - "número"
      - "no."

  incident_date:
    normalize: date_to_iso
    validate: is_date
    hints:
      - "fecha"
      - "ocurrió"
      - "incidente"
      - "siniestro"
      - "cuándo"
      - "hecho"

  incident_location:
    normalize: uppercase_trim
    validate: non_empty
    hints:
      - "lugar"
      - "ubicación"
      - "ciudad"
      - "location"
      - "dónde"
      - "dirección"

  vehicle_plate:
    normalize: plate_normalize
    validate: plate_like
    hints:
      - "placa"
      - "plate"
      - "matrícula"
      - "placas"

quality_gate:
  pass_if:
    - required_present_ratio >= 1.0
    - evidence_rate >= 0.8
  warn_if:
    - evidence_rate < 0.8
  fail_if:
    - required_present_ratio < 1.0
