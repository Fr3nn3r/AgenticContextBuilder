doc_type: id_document
version: v1

required_fields:
  - full_name
  - id_number

optional_fields:
  - document_subtype
  - nationality
  - date_of_birth
  - expiry_date
  - issuing_authority

field_rules:
  full_name:
    normalize: uppercase_trim
    validate: non_empty
    hints:
      - "name"
      - "full name"
      - "nombre"
      - "apellido"
      - "surname"
      - "given name"

  id_number:
    normalize: uppercase_trim
    validate: non_empty
    hints:
      - "ID number"
      - "document number"
      - "cedula"
      - "cédula"
      - "DNI"
      - "passport number"
      - "license number"
      - "número"

  document_subtype:
    normalize: uppercase_trim
    validate: non_empty
    hints:
      - "cedula"
      - "passport"
      - "driver license"
      - "licencia"
      - "pasaporte"
      - "ID card"

  nationality:
    normalize: uppercase_trim
    validate: non_empty
    hints:
      - "nationality"
      - "nacionalidad"
      - "citizenship"
      - "country"
      - "país"

  date_of_birth:
    normalize: date_to_iso
    validate: is_date
    hints:
      - "date of birth"
      - "birth date"
      - "DOB"
      - "fecha de nacimiento"
      - "nacimiento"

  expiry_date:
    normalize: date_to_iso
    validate: is_date
    hints:
      - "expiry date"
      - "expiration"
      - "valid until"
      - "vencimiento"
      - "fecha de caducidad"

  issuing_authority:
    normalize: uppercase_trim
    validate: non_empty
    hints:
      - "issued by"
      - "issuing authority"
      - "autoridad"
      - "expedido por"
      - "issuer"

quality_gate:
  pass_if:
    - required_present_ratio >= 1.0
    - evidence_rate >= 0.7
  warn_if:
    - evidence_rate < 0.7
  fail_if:
    - required_present_ratio < 1.0
