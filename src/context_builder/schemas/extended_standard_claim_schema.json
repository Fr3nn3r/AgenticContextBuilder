{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://example.com/schemas/claim-contract-view.schema.json",
    "title": "Claim Contract View",
    "description": "Minimal claim schema containing only fields that may be referenced by the policy contract (coverage triggers, conditions, limits), wrapped under a top-level 'claim' object.",
    "type": "object",
    "additionalProperties": false,
    "properties": {
        "claim": {
            "type": "object",
            "description": "Root claim object used by the policy contract engine.",
            "additionalProperties": false,
            "properties": {
                "header": {
                    "type": "object",
                    "description": "Contract-relevant header fields used in coverage triggers and conditions.",
                    "additionalProperties": false,
                    "properties": {
                        "line_of_business": {
                            "type": "string",
                            "description": "Canonical line of business; used to select applicable coverage forms and rules (e.g., 'Property', 'Motor', 'Liability', 'Life', 'Health', 'Travel', 'Cyber')."
                        },
                        "claim_type": {
                            "type": "string",
                            "description": "High-level claim type (e.g., 'first_party', 'third_party', 'benefit', 'liability') used by policy conditions that discriminate by claim type."
                        },
                        "loss_at": {
                            "type": "string",
                            "format": "date-time",
                            "description": "Date/time when the loss/event occurred; used in occurrence/period-related conditions."
                        },
                        "discovered_at": {
                            "type": "string",
                            "format": "date-time",
                            "description": "Date/time when the loss was discovered; used in discovery/retroactive-date conditions for some products."
                        },
                        "reported_at": {
                            "type": "string",
                            "format": "date-time",
                            "description": "Date/time the claim was reported; used in claims-made and notice/late-notice conditions."
                        },
                        "jurisdiction": {
                            "type": "string",
                            "description": "Jurisdiction applicable to the claim (e.g., ISO 3166 country/region code, or internal code); used by territorial/jurisdiction clauses."
                        },
                        "attributes": {
                            "type": "object",
                            "description": "Policy-specific header attributes (e.g., trip_type, treatment_category, coverage_tier).",
                            "additionalProperties": {
                                "type": ["string", "number", "boolean", "null"]
                            }
                        }
                    },
                    "required": [
                        "loss_at",
                        "reported_at"
                    ]
                },
                "incident": {
                    "type": "object",
                    "description": "Contract-relevant description of the loss/incident.",
                    "additionalProperties": false,
                    "properties": {
                        "primary_cause_code": {
                            "type": "string",
                            "description": "Primary cause-of-loss code as seen by the engine; matched against covered/excluded causes in the policy IR."
                        },
                        "secondary_cause_code": {
                            "type": "string",
                            "description": "Secondary or contributing cause-of-loss code; used when contract logic distinguishes between multiple causes."
                        },
                        "location_country": {
                            "type": "string",
                            "description": "Country where the incident occurred, typically ISO 3166-1 alpha-2; used by territory/coverage-area conditions."
                        },
                        "location_description": {
                            "type": "string",
                            "description": "Free-text description of the location (address, facility, route, region) that may be inspected or matched against policy location schedules."
                        },
                        "attributes": {
                            "type": "object",
                            "description": "Policy-specific incident modifiers (e.g., vehicle_make, building_age, wind_speed, is_vacant, alarm_active).",
                            "additionalProperties": {
                                "type": ["string", "number", "boolean", "null"]
                            }
                        }
                    },
                    "required": [
                        "primary_cause_code"
                    ]
                },
                "parties": {
                    "type": "object",
                    "description": "Minimal party view used in conditions that depend on who is claiming (insured vs third party vs beneficiary).",
                    "additionalProperties": false,
                    "properties": {
                        "claimants": {
                            "type": "array",
                            "description": "Claimants with roles that may be referenced by policy wording (e.g. insured, additional insured, beneficiary, third party).",
                            "items": {
                                "type": "object",
                                "additionalProperties": false,
                                "properties": {
                                    "role": {
                                        "type": "string",
                                        "description": "Role relevant to coverage conditions; e.g., 'insured', 'additional_insured', 'beneficiary', 'third_party', 'employee', 'passenger'."
                                    },
                                    "attributes": {
                                        "type": "object",
                                        "description": "Policy-specific claimant attributes (e.g., beneficiary_relationship, age_at_loss, injury_severity).",
                                        "additionalProperties": {
                                            "type": ["string", "number", "boolean", "null"]
                                        }
                                    }
                                },
                                "required": [
                                    "role"
                                ]
                            }
                        }
                    }
                },
                "financials": {
                    "type": "object",
                    "description": "Financial inputs used directly or indirectly by policy calculations (limits, deductibles, co-insurance, sub-limits, etc.).",
                    "additionalProperties": false,
                    "properties": {
                        "currency": {
                            "type": "string",
                            "description": "Currency of the amounts, ISO 4217 (e.g., 'CHF', 'EUR', 'USD'); referenced by policy if currency-dependent conditions exist."
                        },
                        "amounts": {
                            "type": "array",
                            "description": "Breakdown of monetary components that the contract may refer to (e.g., gross_loss, property_damage, bodily_injury, medical_expense).",
                            "items": {
                                "type": "object",
                                "additionalProperties": false,
                                "properties": {
                                    "type": {
                                        "type": "string",
                                        "description": "Semantic type of the amount, used by the policy IR to apply limits/deductibles (e.g. 'gross_loss', 'property_damage', 'bodily_injury', 'medical_expense', 'defense_costs')."
                                    },
                                    "amount": {
                                        "type": "number",
                                        "description": "Monetary amount in the specified currency."
                                    },
                                    "attributes": {
                                        "type": "object",
                                        "description": "Policy-specific amount metadata (e.g., repair_category, vendor_type, approval_status).",
                                        "additionalProperties": {
                                            "type": ["string", "number", "boolean", "null"]
                                        }
                                    }
                                },
                                "required": [
                                    "type",
                                    "amount"
                                ]
                            }
                        },
                        "attributes": {
                            "type": "object",
                            "description": "Policy-specific financial metadata (e.g., payment_schedule, settlement_type, currency_exchange_rate).",
                            "additionalProperties": {
                                "type": ["string", "number", "boolean", "null"]
                            }
                        }
                    }
                }
            },
            "required": [
                "header",
                "incident"
            ]
        }
    },
    "required": [
        "claim"
    ]
}